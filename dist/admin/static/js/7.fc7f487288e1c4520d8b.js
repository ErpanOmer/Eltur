webpackJsonp([7],{PIua:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("vLgD"),i=n("T452");var s=n("0xDb"),r=n("E4LH"),l={name:"issue",data:function(){return{itemList:["推荐","婚姻家庭","交通事故","劳动用工","治安刑事","医疗事故","房产土地","责权责务","合同纠纷","征地拆迁"],listLoading:!1,activeName:"new",listQuery:{page:1,pageSize:10,key:"alreadyAnswered",value:"false",type:"eq"},total:null,list:[],dialogReply:!1,replyData:{}}},mounted:function(){var e=this;this.$nextTick(function(){e.getList()})},methods:{openReply:function(e){this.replyData=e,this.dialogReply=!0},submit:function(){var e=this;if(Object(r.a)(this.replyData.answerText))return this.$message.error("恢复内容不要留空!"),!1;(function(e){return Object(a.a)({url:i.a.replyIssue,method:"post",data:e})})({id:this.replyData.id,answerText:this.replyData.answerText}).then(function(t){t.success&&t.code&&(e.$message({type:"success",message:"回复成功"}),e.dialogReply=!1)})},open:function(){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},formatTime:s.a,getList:function(){var e,t=this;this.listLoading=!0,(e=this.listQuery,Object(a.a)({url:i.a.issue,method:"get",params:e})).then(function(e){console.log(e.list),t.list=e.list,t.total=e.totalCount,t.listLoading=!1})},handleClick:function(e){0===Number(e.index)?this.listQuery.value="false":this.listQuery.value="true",this.getList()},handleSizeChange:function(e){this.listQuery.pageSize=e},handleCurrentChange:function(e){this.listQuery.page=e}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"issue"}},[n("el-container",[n("el-header",[n("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"最新",name:"new"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"已回复",name:"alreadyAnswered"}})],1)],1),e._v(" "),n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{"element-loading-text":"给我一点时间"}},[n("el-row",{attrs:{gutter:20}},e._l(e.list,function(t,a){return n("el-col",{key:t.id,attrs:{span:12}},[n("el-card",{attrs:{"body-style":{padding:"0px"}}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("img",{staticClass:"cover",attrs:{src:t.cover}}),e._v(" "),n("span",{staticClass:"name",domProps:{textContent:e._s(t.name)}}),e._v(" "),n("el-tag",{staticClass:"tag",attrs:{type:"warning"},domProps:{textContent:e._s(e.itemList[t.category])}})],1),e._v(" "),n("div",{staticStyle:{padding:"10px 15px 15px"}},[n("div",{staticClass:"content"},[n("p",[e._v("问题描述:")]),e._v(" "),n("p",{staticStyle:{"margin-top":"5px",color:"#666"},domProps:{textContent:e._s(t.question)}})]),e._v(" "),n("div",[t.alreadyAnswered?e._e():n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.openReply(t)}}},[e._v("回复")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.open()}}},[e._v("删除")]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"6px"},attrs:{type:"text"},domProps:{textContent:e._s(e.formatTime(t.createdTime))}})],1)])])],1)}))],1),e._v(" "),n("el-footer",[n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,25,50],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1)])],1),e._v(" "),n("el-dialog",{attrs:{title:"问题回复",visible:e.dialogReply},on:{"update:visible":function(t){e.dialogReply=t}}},[n("el-form",{attrs:{model:e.replyData}},[n("el-tag",{staticClass:"tag",attrs:{type:"warning"},domProps:{textContent:e._s(e.itemList[e.replyData.category])}}),e._v(" "),n("el-form-item",{attrs:{label:"问题描述:"}}),e._v(" "),n("p",{domProps:{textContent:e._s(e.replyData.question)}}),e._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"7.5px"},attrs:{label:"回复内容:"}}),e._v(" "),n("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.replyData.answerText,callback:function(t){e.$set(e.replyData,"answerText",t)},expression:"replyData.answerText"}})],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogReply=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=n("/Xao")(l,o,!1,function(e){n("SlYz")},null,null);t.default=c.exports},SlYz:function(e,t,n){var a=n("YFH7");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("8bSs")("06463640",a,!0)},YFH7:function(e,t,n){(e.exports=n("BkJT")(!1)).push([e.i,'\n#issue {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  padding: 15px 0;\n}\n#issue .el-dialog__body {\n    padding: 5px 20px;\n}\n#issue .el-dialog__body .el-form-item {\n      margin: 0;\n}\n#issue .el-dialog__body p {\n      margin: 0;\n}\n#issue .el-main {\n    padding-top: 0;\n}\n#issue .el-col {\n    margin-bottom: 20px;\n}\n#issue .el-card .el-card__header {\n    padding: 10px 15px;\n}\n#issue .el-card .el-card__header .cover {\n      width: 60px;\n      height: 60px;\n      overflow: hidden;\n      border-radius: 12px;\n      vertical-align: middle;\n}\n#issue .el-card .el-card__header .name {\n      margin-left: 10px;\n      color: #ffa500;\n}\n#issue .el-card .el-card__header .tag {\n      float: right;\n      margin-top: 14px;\n}\n#issue .el-card .content {\n    padding-bottom: 10px;\n    border-bottom: 1px solid #eee;\n    margin-bottom: 10px;\n}\n#issue .el-card .content p {\n      margin: 0;\n      font-size: 14px;\n      line-height: 24px;\n      color: #333;\n}\n.time {\n  font-size: 13px;\n  color: #999;\n}\n.bottom {\n  margin-top: 13px;\n  line-height: 12px;\n}\n.button {\n  padding: 0;\n  float: right;\n}\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: "";\n}\n.clearfix:after {\n  clear: both;\n}\n',""])}});