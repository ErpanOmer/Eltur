webpackJsonp([8],{"GA+Y":function(t,e,n){var a=n("aX5p");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("8bSs")("66cfc6b2",a,!0)},JgXa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("vLgD"),i=n("T452");var l=n("0xDb"),s={name:"comment",directives:{waves:n("cAgV").a},data:function(){return{list:[],total:null,listQuery:{page:1,pageSize:10},listLoading:!1,tableKey:0,itemList:["推荐","婚姻家庭","交通事故","劳动用工","治安刑事","医疗事故","房产土地","责权责务","合同纠纷","征地拆迁"]}},mounted:function(){this.getComments()},methods:{handleDelete:function(t){var e=this;(function(t){return Object(a.a)({url:i.a.comment,method:"delete",params:t})})({commentId:t.id,articleId:t.articleId}).then(function(n){if(n.success&&520===n.code){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var a=e.list.indexOf(t);e.list.splice(a,1)}else e.$message.error("删除失败")})},getComments:function(){var t,e=this;this.listLoading=!0,(t=this.listQuery,Object(a.a)({url:i.a.comment,method:"get",params:t})).then(function(t){e.list=t.list,e.total=t.totalCount,e.listLoading=!1})},handleFilter:function(){this.listQuery.page=1,this.getComments()},handleSizeChange:function(t){this.listQuery.pageSize=t,this.getComments()},handleCurrentChange:function(t){this.listQuery.page=t,this.getComments()},Time:function(t){return Object(l.b)(t,"{y}-{m}-{d} {h}:{i}")}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container calendar-list-container"},[n("div",{staticClass:"filter-container",staticStyle:{"padding-bottom":"15px"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"评论内容"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}}}),t._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,attrs:{data:t.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-rowstyle":"width: 100%"}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"150px",align:"center",label:"评论时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.Time(e.row.createdTime)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"150px",align:"center",label:"评论文章"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"link-type",domProps:{textContent:t._s(e.row.articleTitle)},on:{click:function(n){t.handleUpdate(e.row)}}}),t._v(" "),n("el-tag",{attrs:{type:"warning"},domProps:{textContent:t._s(t.itemList[e.row.articlecategory])}})]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"150px",align:"center",label:"评论者"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{textContent:t._s(e.row.name)}})]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"150px",align:"center",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{attrs:{src:t.row.cover,width:"50px",alt:""}})]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"150px",align:"center",label:"评论内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{textContent:t._s(e.row.text)}})]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"300","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success"}},[t._v("审核")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,25,50],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)],1)},staticRenderFns:[]};var o=n("/Xao")(s,r,!1,function(t){n("GA+Y")},"data-v-469db926",null);e.default=o.exports},aX5p:function(t,e,n){(t.exports=n("BkJT")(!1)).push([t.i,"",""])}});